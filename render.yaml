services:
  - name: server
    type: web # This is the main web service
    env: docker
    dockerfilePath: Dockerfile
    buildCommand: npm install
    envVars:
      - key: NODE_ENV
        value: production
    plan: starter # Choose the appropriate plan for your needs
    healthCheckPath: /

  - name: worker
    type: worker # This is a worker service that will run the background tasks
    env: docker
    dockerfilePath: Dockerfile
    buildCommand: npm install
    envVars:
      - key: NODE_ENV
        value: production
    plan: starter

  - name: redis
    type: redis
    plan: starter
    envVars:
      - key: REDIS_BIND
        value: 13.228.225.19,18.142.128.26,54.254.162.138 # Allow these IPs
